{"remainingRequest":"/Users/kingsun/打咩/Vue/vue-practice/node_modules/babel-loader/lib/index.js!/Users/kingsun/打咩/Vue/vue-practice/src/components/Toast/index.js","dependencies":[{"path":"/Users/kingsun/打咩/Vue/vue-practice/src/components/Toast/index.js","mtime":1640671954883},{"path":"/Users/kingsun/打咩/Vue/vue-practice/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kingsun/打咩/Vue/vue-practice/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1pbnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVG9hc3QgZnJvbSAnLi9tYWluLnZ1ZSc7CnZhciBDb25zdHJ1Y3RvckNvbXBvbmVudCA9IFZ1ZS5leHRlbmQoVG9hc3QpOwp2YXIgaW5zdGFuY2U7CnZhciBpbnN0YW5jZXMgPSBbXTsKdmFyIHNlZWQgPSAxOwoKdmFyIFRvYXN0SW5zdGFuY2UgPSBmdW5jdGlvbiBUb2FzdEluc3RhbmNlKCkgewogIHZhciBvcHRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogIG9wdGlvbiA9IG9wdGlvbiB8fCB7fTsKCiAgaWYgKHR5cGVvZiBvcHRpb24gPT09ICdzdHJpbmcnKSB7CiAgICBvcHRpb24gPSB7CiAgICAgIG1lc3NhZ2U6IG9wdGlvbgogICAgfTsKICB9CgogIHZhciB1c2VyT25DbG9zZSA9IG9wdGlvbi5vbkNsb3NlOwogIHZhciBpZCA9ICdtZXNzYWdlXycgKyBzZWVkKys7CgogIG9wdGlvbi5vbkNsb3NlID0gZnVuY3Rpb24gKCkgewogICAgVG9hc3RJbnN0YW5jZS5jbG9zZShpZCwgdXNlck9uQ2xvc2UpOwogIH07CgogIGluc3RhbmNlID0gbmV3IENvbnN0cnVjdG9yQ29tcG9uZW50KHsKICAgIGRhdGE6IG9wdGlvbgogIH0pOwogIGluc3RhbmNlLmlkID0gaWQ7CiAgaW5zdGFuY2UuJG1vdW50KCk7CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbnN0YW5jZS4kZWwpOwogIHZhciBvZmZUb3AgPSAyMDsKICBpbnN0YW5jZS52ZXJ0aWNhbE9mZnNldCA9IDIwOwogIGluc3RhbmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChpbnN0YW5jZSkgewogICAgb2ZmVG9wICs9IGluc3RhbmNlLiRlbC5vZmZzZXRIZWlnaHQgKyAxNjsKICB9KTsKICBpbnN0YW5jZS52ZXJ0aWNhbE9mZnNldCA9IG9mZlRvcDsKICBpbnN0YW5jZXMucHVzaChpbnN0YW5jZSk7CiAgcmV0dXJuIGluc3RhbmNlOwp9OwoKVG9hc3RJbnN0YW5jZS5jbG9zZSA9IGZ1bmN0aW9uIChpZCwgdXNlck9uQ2xvc2UpIHsKICB2YXIgbGVuID0gaW5zdGFuY2VzLmxlbmd0aDsKICB2YXIgaW5kZXggPSAtMTsKICB2YXIgcmVtb3ZlZEhlaWdodDsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgaWYgKGlkID09PSBpbnN0YW5jZXNbaV0uaWQpIHsKICAgICAgcmVtb3ZlZEhlaWdodCA9IGluc3RhbmNlc1tpXS4kZWwub2Zmc2V0SGVpZ2h0OwogICAgICBpbmRleCA9IGk7CgogICAgICBpZiAodHlwZW9mIHVzZXJPbkNsb3NlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdXNlck9uQ2xvc2UoaW5zdGFuY2VzW2ldKTsKICAgICAgfQoKICAgICAgaW5zdGFuY2VzLnNwbGljZShpLCAxKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICBpZiAobGVuIDw9IDEgfHwgaW5kZXggPT09IC0xIHx8IGluZGV4ID4gaW5zdGFuY2VzLmxlbmd0aCAtIDEpIHJldHVybjsKCiAgZm9yICh2YXIgX2kgPSBpbmRleDsgX2kgPCBsZW4gLSAxOyBfaSsrKSB7CiAgICB2YXIgZG9tID0gaW5zdGFuY2VzW19pXS4kZWw7CiAgICBkb20uc3R5bGVbJ3RvcCddID0gcGFyc2VJbnQoZG9tLnN0eWxlWyd0b3AnXSwgMTApIC0gcmVtb3ZlZEhlaWdodCAtIDE2ICsgJ3B4JzsKICB9Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgaW5zdGFsbDogZnVuY3Rpb24gaW5zdGFsbChWdWUpIHsKICAgIFZ1ZS5wcm90b3R5cGVbIiQiLmNvbmNhdChUb2FzdC5uYW1lKV0gPSBUb2FzdEluc3RhbmNlOwogIH0KfTs="},{"version":3,"sources":["/Users/kingsun/打咩/Vue/vue-practice/src/components/Toast/index.js"],"names":["Vue","Toast","ConstructorComponent","extend","instance","instances","seed","ToastInstance","option","message","userOnClose","onClose","id","close","data","$mount","document","body","appendChild","$el","offTop","verticalOffset","forEach","offsetHeight","push","len","length","index","removedHeight","i","splice","dom","style","parseInt","install","prototype","name"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Toast from './main.vue'\nconst ConstructorComponent = Vue.extend(Toast)\n\nlet instance\nconst instances = []\nlet seed = 1\n\nconst ToastInstance = (option = {}) => {\n  option = option || {}\n  if (typeof option === 'string') {\n    option = {\n      message: option\n    }\n  }\n  const userOnClose = option.onClose\n  const id = 'message_' + seed++\n\n  option.onClose = function() {\n    ToastInstance.close(id, userOnClose)\n  }\n  instance = new ConstructorComponent({\n    data: option\n  })\n  instance.id = id\n  instance.$mount()\n  document.body.appendChild(instance.$el)\n\n  let offTop = 20\n  instance.verticalOffset = 20\n  instances.forEach(instance => {\n    offTop += instance.$el.offsetHeight + 16\n  })\n  instance.verticalOffset = offTop\n  instances.push(instance)\n  return instance\n}\nToastInstance.close = function(id, userOnClose) {\n  const len = instances.length\n  let index = -1\n  let removedHeight\n  for (let i = 0; i < len; i++) {\n    if (id === instances[i].id) {\n      removedHeight = instances[i].$el.offsetHeight\n      index = i\n      if (typeof userOnClose === 'function') {\n        userOnClose(instances[i])\n      }\n      instances.splice(i, 1)\n      break\n    }\n  }\n  if (len <= 1 || index === -1 || index > instances.length - 1) return\n  for (let i = index; i < len - 1; i++) {\n    const dom = instances[i].$el\n    dom.style['top'] =\n      parseInt(dom.style['top'], 10) - removedHeight - 16 + 'px'\n  }\n}\n\nexport default {\n  install: Vue => {\n    Vue.prototype[`$${Toast.name}`] = ToastInstance\n  }\n}\n"]}]}