{"remainingRequest":"/Users/kingsun/打咩/Vue/vue-practice/node_modules/babel-loader/lib/index.js!/Users/kingsun/打咩/Vue/vue-practice/src/store/modules/token.js","dependencies":[{"path":"/Users/kingsun/打咩/Vue/vue-practice/src/store/modules/token.js","mtime":1649903299038},{"path":"/Users/kingsun/打咩/Vue/vue-practice/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kingsun/打咩/Vue/vue-practice/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKLy8gaW1wb3J0IGFwaSBmcm9tICdAL2FwaScKdmFyIHN0YXRlID0gewogIHRva2VuOiBsb2NhbFN0b3JhZ2UudG9rZW4sCiAgZmFpbHVyZXRpbWU6IGxvY2FsU3RvcmFnZS5mYWlsdXJldGltZQp9Owp2YXIgZ2V0dGVycyA9IHsKICBpc0xvZ2luOiBmdW5jdGlvbiBpc0xvZ2luKHN0YXRlKSB7CiAgICB2YXIgcmV0biA9IGZhbHNlOwoKICAgIGlmIChzdGF0ZS50b2tlbiAhPSBudWxsKSB7CiAgICAgIHZhciB1bml4ID0gRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKTsKCiAgICAgIGlmICh1bml4IDwgc3RhdGUuZmFpbHVyZXRpbWUgKiAxMDAwKSB7CiAgICAgICAgcmV0biA9IHRydWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gcmV0bjsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgLy8g5qih5ouf55m75b2V5oiQ5Yqf77yM5YaZ5YWlIHRva2VuIOS/oeaBrwogICAgICBjb21taXQoJ3NldERhdGEnLCB7CiAgICAgICAgdG9rZW46ICcxMjM0NTY3ODkwJywKICAgICAgICBmYWlsdXJldGltZTogRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKSAvIDEwMDAgKyAyNCAqIDYwICogNjAKICAgICAgfSk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0gLy8gbG9naW4oewogIC8vICAgICBjb21taXQKICAvLyB9LCBkYXRhKSB7CiAgLy8gICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgLy8gICAgICAgICBhcGkucG9zdCgnbWVtYmVyL2xvZ2luJywgZGF0YSkudGhlbihyZXMgPT4gewogIC8vICAgICAgICAgICAgIGNvbW1pdCgnc2V0RGF0YScsIHJlcy5kYXRhKQogIC8vICAgICAgICAgICAgIHJlc29sdmUocmVzKQogIC8vICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogIC8vICAgICAgICAgICAgIHJlamVjdChlcnJvcikKICAvLyAgICAgICAgIH0pCiAgLy8gICAgIH0pCiAgLy8gfQoKfTsKdmFyIG11dGF0aW9ucyA9IHsKICBzZXREYXRhOiBmdW5jdGlvbiBzZXREYXRhKHN0YXRlLCBkYXRhKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBkYXRhLnRva2VuKTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmYWlsdXJldGltZScsIGRhdGEuZmFpbHVyZXRpbWUpOwogICAgc3RhdGUudG9rZW4gPSBkYXRhLnRva2VuOwogICAgc3RhdGUuZmFpbHVyZXRpbWUgPSBkYXRhLmZhaWx1cmV0aW1lOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgZ2V0dGVyczogZ2V0dGVycywKICBtdXRhdGlvbnM6IG11dGF0aW9ucwp9Ow=="},{"version":3,"sources":["/Users/kingsun/打咩/Vue/vue-practice/src/store/modules/token.js"],"names":["state","token","localStorage","failuretime","getters","isLogin","retn","unix","Date","parse","actions","login","commit","Promise","resolve","mutations","setData","data","setItem","namespaced"],"mappings":";;AAAA;AAEA,IAAMA,KAAK,GAAG;AACVC,EAAAA,KAAK,EAAEC,YAAY,CAACD,KADV;AAEVE,EAAAA,WAAW,EAAED,YAAY,CAACC;AAFhB,CAAd;AAKA,IAAMC,OAAO,GAAG;AACZC,EAAAA,OAAO,EAAE,iBAAAL,KAAK,EAAI;AACd,QAAIM,IAAI,GAAG,KAAX;;AACA,QAAIN,KAAK,CAACC,KAAN,IAAe,IAAnB,EAAyB;AACrB,UAAIM,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAW,IAAID,IAAJ,EAAX,CAAX;;AACA,UAAID,IAAI,GAAGP,KAAK,CAACG,WAAN,GAAoB,IAA/B,EAAqC;AACjCG,QAAAA,IAAI,GAAG,IAAP;AACH;AACJ;;AACD,WAAOA,IAAP;AACH;AAVW,CAAhB;AAaA,IAAMI,OAAO,GAAG;AACZC,EAAAA,KADY,uBAGT;AAAA,QADCC,MACD,QADCA,MACD;AACC,WAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC1B;AACAF,MAAAA,MAAM,CAAC,SAAD,EAAY;AACdX,QAAAA,KAAK,EAAE,YADO;AAEdE,QAAAA,WAAW,EAAEK,IAAI,CAACC,KAAL,CAAW,IAAID,IAAJ,EAAX,IAAyB,IAAzB,GAAgC,KAAK,EAAL,GAAU;AAFzC,OAAZ,CAAN;AAIAM,MAAAA,OAAO;AACV,KAPM,CAAP;AAQH,GAZW,CAaZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAxBY,CAAhB;AA2BA,IAAMC,SAAS,GAAG;AACdC,EAAAA,OADc,mBACNhB,KADM,EACCiB,IADD,EACO;AACjBf,IAAAA,YAAY,CAACgB,OAAb,CAAqB,OAArB,EAA8BD,IAAI,CAAChB,KAAnC;AACAC,IAAAA,YAAY,CAACgB,OAAb,CAAqB,aAArB,EAAoCD,IAAI,CAACd,WAAzC;AACAH,IAAAA,KAAK,CAACC,KAAN,GAAcgB,IAAI,CAAChB,KAAnB;AACAD,IAAAA,KAAK,CAACG,WAAN,GAAoBc,IAAI,CAACd,WAAzB;AACH;AANa,CAAlB;AASA,eAAe;AACXgB,EAAAA,UAAU,EAAE,IADD;AAEXnB,EAAAA,KAAK,EAALA,KAFW;AAGXU,EAAAA,OAAO,EAAPA,OAHW;AAIXN,EAAAA,OAAO,EAAPA,OAJW;AAKXW,EAAAA,SAAS,EAATA;AALW,CAAf","sourcesContent":["// import api from '@/api'\n\nconst state = {\n    token: localStorage.token,\n    failuretime: localStorage.failuretime\n}\n\nconst getters = {\n    isLogin: state => {\n        let retn = false\n        if (state.token != null) {\n            let unix = Date.parse(new Date())\n            if (unix < state.failuretime * 1000) {\n                retn = true\n            }\n        }\n        return retn\n    }\n}\n\nconst actions = {\n    login({\n        commit\n    }) {\n        return new Promise(resolve => {\n            // 模拟登录成功，写入 token 信息\n            commit('setData', {\n                token: '1234567890',\n                failuretime: Date.parse(new Date()) / 1000 + 24 * 60 * 60\n            })\n            resolve()\n        })\n    }\n    // login({\n    //     commit\n    // }, data) {\n    //     return new Promise((resolve, reject) => {\n    //         api.post('member/login', data).then(res => {\n    //             commit('setData', res.data)\n    //             resolve(res)\n    //         }).catch(error => {\n    //             reject(error)\n    //         })\n    //     })\n    // }\n}\n\nconst mutations = {\n    setData(state, data) {\n        localStorage.setItem('token', data.token)\n        localStorage.setItem('failuretime', data.failuretime)\n        state.token = data.token\n        state.failuretime = data.failuretime\n    }\n}\n\nexport default {\n    namespaced: true,\n    state,\n    actions,\n    getters,\n    mutations\n}\n"]}]}